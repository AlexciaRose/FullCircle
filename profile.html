<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

     <!-- Bootstrap CSS -->
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
     <link rel="stylesheet" href="Styles/profile.css">
    
    <!--Icons-->
    <script src="https://kit.fontawesome.com/6b35027422.js" crossorigin="anonymous"></script>
     
     <!--Bootstrap Optional Javascript-->
     <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <!--Javascript file-->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- add this script tag to the head section of your HTML file -->
<script>
  function loadData() {
    // make an AJAX request to the server-side endpoint
    fetch('/data')
      .then(response => response.json())
      .then(data => {
        // update the HTML elements with the response data
        const cardTitle = document.querySelector('.card-title');
        const cardText = document.querySelector('.card-text');
        cardTitle.textContent = data.title;
        cardText.textContent = data.text;
      })
      .catch(error => console.error(error));
  }
</script>


    <title>Profile</title>
</head>
<body id="bodyId"> 
    <header class="header" id="headerId">
        <div class="header_toggle"> <i class="fa-solid fa-angle-right" style="color: #4723D9;" id="toggleId"></i> </div>
        <div class="header_img"> <img src="" alt=""> </div>
    </header>
    <div class="l-navbar" id="navId">
        <nav class="nav">
            <div> <a href="#" class="nav_logo"> <i class="fa-solid fa-circle-notch fa-rotate-90 fa-lg" style="color: #fcfcfc;"></i> <span class="nav_logo-name">FullCircle</span> </a>
                <div class="nav_list"> 
                    <a href="dashboard.html" class="nav_link"> <i class="fa-solid fa-boxes-stacked" style="color: #e6e6e6;"></i> <span class="nav_name">Dashboard</span> </a> 
                    <a href="tasks.html" class="nav_link"> <i class="fa-solid fa-folder" style="color: #e6e6e6;"></i> <span class="nav_name">Tasks</span> </a> 
                    <a href="calendar.html" class="nav_link"> <i class="fa-solid fa-calendar" style="color: #e6e6e6;"></i> <span class="nav_name">Schedule</span> </a> 
                    <a href="profile.html" class="nav_link  active"> <i class="fa-solid fa-user" style="color: #e6e6e6;"></i> <span class="nav_name">Profile</span> </a> 
                  
                </div>
            </div> <a href="#" class="nav_link"> <i class="fa-solid fa-right-from-bracket" style="color: #e8e8e8;"></i> <span class="nav_name">Logout</span> </a>
        </nav>
    </div>
    
        <!--Main body of information-->
        <div id="picpurpose">
          <img src="Images/ava.jpg" alt="Avatar" class="avatar" id="avatar-image">
          <select id="avatar-selector" onchange="changeAvatar()">
             <option value="Images/ava.jpg">Default</option>
             <option value="Images/male.png">Male Avatar</option>
             <option value="Images/female.png">Female Avatar</option>
          </select>
       </div>
       
        <center><h1>Profile</h1>
            <div class="dropdown">
                <button class="dropbtn">Edit</button>
                <div class="dropdown-content" style="left:0;">
                  <a id="edit-profile" data-bs-toggle="modal" data-bs-target="#editModal">Edit Profile</a>
                <a id="change-password">Change Password</a>
                <a href="#" id="deleteAccountLink">Delete Account</a>
                </div>
           </center>
         <!--Modal for Edit Profile-->
         <div class="modal fade vw-100" id="editModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Edit Profile</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <!--FORM-->
                <form id="edit-form" method="post">
                  <div class="mb-3">
                    <label for="first-name" class="col-form-label">First Name:</label>
                    <input type="text" class="form-control" name="FirstName" id="edit-first-name" required>
                  </div>
                  <div class="mb-3">
                    <label for="last-name" class="col-form-label">Last Name:</label>
                    <input type="text" class="form-control" name="LastName" id="edit-last-name" required>
                  </div>
                  <div class="mb-3">
                    <label for="email" class="col-form-label">Email:</label>
                    <input type="email" class="form-control" name="Email" id="edit-email" required>
                  </div>
                  <div class="modal-footer">
                    <input type="submit" class="btn btn-primary" value="Save Changes">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
        




          <!--Modal For Change Password-->
          <div id="password-modal" class="modal">
            <div class="modal-content">
              <span class="close">&times;</span>
              <h2>Change Password</h2>
              <form>
                <label for="old-password">Old Password:</label>
                <input type="password" id="old-password" name="old-password" required><br><br>
                <label for="new-password">New Password:</label>
                <input type="password" id="new-password" name="new-password" required><br><br>
                <div class="modal-buttons">
                  <button type="submit" id="submit-password">Submit</button>
                  <button type="button" class="close-button">Cancel</button>
                </div>
              </form>
            </div>
          </div>
        <!--Modal for Delete Account-->
        <div id="deleteAccountModal" class="modal">
          <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Delete Account</h2>
            <p>Please enter your first name, last name, and password to confirm account deletion:</p>
            <form id="deleteAccountForm" method="post">
              <label for="email">Email:</label>
              <input type="text" id="email" name="Email" required>
              <label for="password">Password:</label>
              <input type="password" id="password" name="password" required>
              <br>
              <button type="submit" class="deleteAccountBtn">Delete Account</button>
            </form>
          </div>
        </div>
        
          
          
           
           <br><br><br><br><br>
    <div class="row row-cols-1 row-cols-md-2 g-4" id="class-list">
      
          <!--
            <div class="col">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Pre-Calculus 1</h5>
                  <p class="card-text">Tuesday, 8:00am - 10:00pm <br> Thursday, 8:00am - 10:00pm <br> 12 complete</p>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Data Structures</h5>
                  <p class="card-text">Monday, 10:00am - 12:30pm <br> Wednesday, 10:00am - 12:30pm <br> 12 complete</p>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="card">
               
                <div class="card-body">
                  <h5 class="card-title">Daniel</h5>
                  <p class="card-text">Tuesday, 8:00am - 10:00pm <br> Thursday, 8:00am - 10:00pm <br> 12 complete</p>
                </div>
              </div>
            </div>-->  
    </div><br>
          <centre>
          <div class="flex-container">
            <div class="flex-item-left" id="myChartContainer"><canvas id="myChart"></canvas></div>
          </div>
        </centre>

    <script src="Javascript/profile.js"></script>
    <script src="Javascript/sidenav.js"></script>
    <script>
      function changeAvatar() {
        var img = document.getElementById("avatar-image");
        var select = document.getElementById("avatar-selector");
        img.src = select.value;

        
      }
    </script>
   
    
<!--password modal-->
<script>
  // Get the password change modal box
  var passwordModal = document.querySelector('#password-modal');

  // Get the <a> tag for changing the password
  var changePasswordLink = document.querySelector('#change-password');

  // Get the close button for the password change modal box
  var closePasswordButton = document.querySelector('#password-modal .close');

  // Get the submit button for the password change modal box
  var submitPasswordButton = document.querySelector('#password-modal #submit-button');

  // Get the confirmation box
  var confirmationBox = document.querySelector('#password-confirmation');

  // Get the confirm button for the confirmation box
  var confirmButton = document.querySelector('#password-confirmation #confirm-button');

  // When the user clicks the change password link, show the password change modal box
  changePasswordLink.addEventListener('click', function(event) {
    event.preventDefault(); // Prevent the link from navigating to a new page
    passwordModal.style.display = 'block';
  });

  // When the user clicks the close button, hide the password change modal box
  closePasswordButton.addEventListener('click', function() {
    passwordModal.style.display = 'none';
  });

  // When the user clicks the submit button, show the confirmation box
  submitPasswordButton.addEventListener('click', function() {
    confirmationBox.style.display = 'block';
  });

  // When the user clicks the confirm button, submit the form and hide the confirmation box
  confirmButton.addEventListener('click', function() {
    console.log('Confirm button clicked!');
    // Submit the form using AJAX or by navigating to a new page
    // ...
    confirmationBox.style.display = 'none';
    passwordModal.style.display = 'none'; // Hide the password change modal box
  });

  // When the user clicks the cancel button in the confirmation box, hide the confirmation box
  var cancelButton = document.querySelector('#password-confirmation #cancel-button');
  cancelButton.addEventListener('click', function() {
    confirmationBox.style.display = 'none';
  });
  
</script>
<!--Modal script for delete account-->
<script>
  // Get the modal
  var modal = document.getElementById("deleteAccountModal");
  
  // Get the link that opens the modal
  var link = document.getElementById("deleteAccountLink");
  
  // Get the <span> element that closes the modal
  var span = document.querySelector(".close");
  
  // When the user clicks the link, open the modal
  link.onclick = function() {
    modal.style.display = "block";
  }
  
  // When the user clicks on <span> (x), close the modal
  span.onclick = function() {
    modal.style.display = "none";
  }
  
  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function(event) {
    if (event.target == modal) {
      modal.style.display = "none";
    }
  }
  
  // Handle form submission
  var deleteAccountForm = document.getElementById("deleteAccountForm");
  deleteAccountForm.addEventListener("submit", function(event) {
    event.preventDefault(); // prevent form from submitting
    if (confirm("Are you sure you want to delete your profile?")) {
      // delete account logic here
      modal.style.display = "none"; // close modal
    }
  });
</script>

</body>
</html>